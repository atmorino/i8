<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>フローチャート</title>
</head>
<body>
    <canvas id="flowchartCanvas" width="800" height="300" style="border:1px solid #000000;"></canvas>
    <script>
        const canvas = document.getElementById('flowchartCanvas');
        const ctx = canvas.getContext('2d');

        const boxes = [
            {label: 'A', x: 50, y: 50, height: 50},
            {label: 'B', x: 250, y: 50, height: 50},
            {label: 'C', x: 450, y: 50, height: 50},
            {label: 'D', x: 650, y: 50, height: 50}
        ];

        const boxWidth = 50;

        // Draw boxes
        boxes.forEach(box => {
            ctx.strokeRect(box.x, box.y, boxWidth, box.height);
            ctx.fillText(box.label, box.x + boxWidth / 2 - 5, box.y + box.height / 2 + 5);
        });

        // Draw short arrows (A -> B, B -> C, C -> D)
        for (let i = 0; i < boxes.length - 1; i++) {
            const startX = boxes[i].x + boxWidth;
            const startY = boxes[i].y + boxes[i].height / 3;
            const endX = boxes[i + 1].x;
            const endY = startY;

            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(endX, endY);
            ctx.stroke();

            // Draw arrowhead
            ctx.beginPath();
            ctx.moveTo(endX, endY);
            ctx.lineTo(endX - 5, endY - 5);
            ctx.lineTo(endX - 5, endY + 5);
            ctx.closePath();
            ctx.fill();
        }

        // Draw long arrow (A -> D) avoiding boxes B and C
        const startXAtoD = boxes[0].x + boxWidth;
        const startYAtoD = boxes[0].y + 2 * boxes[0].height / 3;
        const midXAtoD = startXAtoD + 3 * (boxes[3].x - startXAtoD) / 4;
        const endXAtoD = boxes[3].x;
        const endYAtoD = startYAtoD;

        ctx.beginPath();
        ctx.moveTo(startXAtoD, startYAtoD);
        ctx.lineTo(startXAtoD, startYAtoD + 40);
        ctx.lineTo(midXAtoD, startYAtoD + 40);
        ctx.lineTo(midXAtoD, endYAtoD);
        ctx.lineTo(endXAtoD, endYAtoD);
        ctx.stroke();

        // Draw arrowhead for A to D
        ctx.beginPath();
        ctx.moveTo(endXAtoD, endYAtoD);
        ctx.lineTo(endXAtoD - 5, endYAtoD - 5);
        ctx.lineTo(endXAtoD - 5, endYAtoD + 5);
        ctx.closePath();
        ctx.fill();
    </script>
</body>
</html>
